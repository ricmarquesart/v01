# core/localization.py

TRANSLATIONS = {
    "en": {
        # Main App & General UI
        "app_title": "Welcome to Your Study Dashboard",
        "debug_mode_toggle": "ğŸ Enable Debug Mode",
        "clear_cache_button": "ğŸ”„ Clear Cache & Reload Data",
        "cache_cleared_success": "Cache cleared successfully! Data will be reloaded.",
        "progress_overview_header": "ğŸ“Š Progress Overview",
        "practice_english_button": "Start Learning ğŸ‡¨ğŸ‡¦",
        "practice_french_button": "Start Learning ğŸ‡«ğŸ‡·",
        "dashboard_title": "Study Dashboard ğŸ‡¨ğŸ‡¦",
        "change_language_button": "ğŸŒ Change Language",
        "active_words_metric": "âš¡ Active Words",
        "accuracy_metric": "ğŸ¯ Overall Accuracy",
        "sessions_metric": "ğŸ—“ï¸ Sessions Completed",
        "practice_header": "ğŸ§  Practice Modes",
        "reinforce_header": "ğŸ’ª Reinforce & Master",
        "analyze_header": "âœï¸ Analyze & Create",
        "back_to_dashboard": "ğŸ”™ Back to Dashboard",
        "no_active_words": "âš ï¸ No active words for the quiz. Please activate some in the Stats & Manager page.",
        "mastery_pie_chart_title": "ğŸ† Overall Mastery",
        "progress_distribution_title": "ğŸ“ˆ Progress Distribution",
        "no_progress_data": "No progress data to display.",
        "error_ranking_title": "ğŸ”¥ Difficulty Ranking (Top Errors)",
        "see_full_ranking_button": "ğŸ‘€ See full ranking",
        "no_errors_to_rank": "âœ… No errors recorded for active words yet. Great job!",
        "age_ranking_title": "â³ Longevity Ranking (Oldest Words)",
        "no_words_to_rank_by_age": "âœ… No active words to rank by age.",

        # Button Names
        "anki_quiz_button": "ğŸ—ƒï¸ ANKI Quiz",
        "gpt_quiz_button": "ğŸ¤– GPT Quiz",
        "mixed_quiz_button": "ğŸ”„ Mixed Quiz",
        "cloze_quiz_button": "ğŸ“ Cloze Quiz",
        "review_mode_button": "ğŸ” Review Mode",
        "focus_mode_button": "ğŸ¯ Focus Mode",
        "writing_mode_button": "âœï¸ Writing Mode",
        "sentence_writing_button": "ğŸ–‹ï¸ Sentence Practice",
        "stats_button": "ğŸ“Š Stats & Manager",

        # Quiz UI (Shared)
        "how_many_questions": "How many questions do you want to answer?",
        "start_quiz": "â–¶ï¸ Start Quiz",
        "no_valid_questions": "âŒ No valid questions found for the selected filters. Please try 'Random' or another type.",
        "quiz_progress": "Progress: {idx}/{total} questions",
        "check_button": "âœ”ï¸ Check",
        "next_button": "â¡ï¸ Next",
        "cancel_quiz": "âœ–ï¸ Cancel Quiz",
        "correct_answer": "âœ… Correct!",
        "incorrect_answer": "âŒ Incorrect! Correct answer: {correct}",
        "final_result": "ğŸ‰ Final result: {correct_count} correct, {error_count} errors | Score: {score}%",
        "finish_button": "ğŸ Finish",
        "choose_exercise_type": "Choose the exercise type:",

        # ANKI Quiz
        "anki_quiz_title": "ANKI Quiz ğŸ‡¨ğŸ‡¦",
        "word_meaning_anki": "1-Word-Meaning",
        "translation_anki": "2-Word-Translation",
        "synonym_anki": "3-Synonym",
        "gap_fill_anki": "4-Gap-Fill",
        "reading_anki": "5-Reading-Comprehension",
        
        # GPT Quiz
        "gpt_quiz_title": "GPT Quiz ğŸ‡¨ğŸ‡¦",
        "how_many_unique_words": "How many UNIQUE WORDS to use?",
        "allow_word_repetition": "Allow word repetition?",
        "repetition_help_no": "If 'No', each word will appear only once.",
        "repetition_help_yes": "If 'Yes', the same word can appear multiple times with different exercises.",
        "option_yes": "Yes",
        "option_no": "No",
        "start_exercises": "â–¶ï¸ Start Exercises",
        "cancel_exercises": "âœ–ï¸ Cancel Exercises",

        # Mixed Quiz
        "mixed_quiz_info": "This mode combines questions from ANKI and GPT quizzes.",

        # Review Mode
        "review_mode_title": "Review Mode ğŸ‡¨ğŸ‡¦",
        "review_info": "This mode tests your knowledge of mastered (inactive) words. If you get a word wrong, it will be reactivated and its progress reset.",
        "how_many_words_to_review": "How many words do you want to review?",
        "start_review": "â–¶ï¸ Start Review",
        "cancel_review": "âœ–ï¸ Cancel Review",
        "review_complete": "ğŸ‰ Review complete! Score: {score}%",
        "words_reactivated": "âš ï¸ The following words were reactivated and their progress reset: {words}",
        "no_inactive_words_info": "You have no mastered words to review yet. Keep practicing in other modes!",
        
        # Focus Mode
        "focus_mode_info": "Choose a word to practice all its available exercises intensively.",
        "choose_focus_word": "Select a word to focus on:",
        "start_focus_button": "â–¶ï¸ Start Focus on '{word}'",
        "choose_another_word": "ğŸ”„ Choose Another Word",
        "practicing_with": "Practicing with:",
        
        # Writing Mode
        "writing_info": "Practice your writing. Choose a word from the list to write or review, or draw one randomly.",
        "choose_word_label": "Choose a word to practice or review:",
        "random_word_button": "ğŸ² Draw New Word",
        "text_area_label": "Write or edit your text here:",
        "words_metric": "Words",
        "chars_metric": "Characters",
        "paragraphs_metric": "Paragraphs",
        "save_text_button": "ğŸ’¾ Save Text",
        "empty_text_error": "The text field is empty.",
        "text_saved_success": "Text for word '{word}' saved successfully!",

        # Stats Page
        "db_summary_header": "ğŸ“Š Database Summary",
        "total_words_metric": "ğŸ“š Total Words",
        "inactive_words_metric": "ğŸ’¤ Inactive Words",
        "anki_source_metric": "ğŸ—ƒï¸ ANKI Source",
        "gpt_source_metric": "ğŸ¤– GPT Source",
        "import_log_header": "âš ï¸ Data Import Log",
        "import_log_warning": "Problems were found while reading the data files. The following lines/files were ignored:",
        "vocab_manager_header": "ğŸ—‚ï¸ Vocabulary Manager",
        "filter_by_source": "Filter by Source:",
        "filter_by_date": "Filter by Add Date:",
        "delete_filtered_button": "ğŸ—‘ï¸ Delete All Filtered",
        "show_exercise_details": "Show details by exercise",
        "col_active": "Active?",
        "col_delete": "Delete?",
        "col_word": "Word",
        "col_source": "Source",
        "col_progress": "Progress",
        "col_status": "Status",
        "col_status_help": "ğŸ† indicates the number of times the word has been mastered!",
        "save_active_status_button": "ğŸ’¾ Save 'Active' Status",
        "delete_selected_button": "ğŸ—‘ï¸ Delete Selected",
        "written_texts_log_header": "âœï¸ Written Texts Log",
        "cloze_texts_manager_header": "ğŸ“ Cloze Texts Manager",
        "danger_zone_header": "âš ï¸ Danger Zone",
        "danger_zone_warning": "The action below is irreversible and will erase ALL your performance history.",
        "clear_history_button": "ğŸ—‘ï¸ Clear ALL Performance History",
        "no_cloze_in_memory": "No '7-Cloze-Text' exercises found in memory.",
        "delete_cloze_button": "ğŸ—‘ï¸ Delete Selected Cloze Texts",
        "no_cloze_selected_for_deletion": "No Cloze texts were marked for deletion.",

        # Cloze Quiz
        "no_cloze_exercises_found": "No '7-Cloze-Text' exercises found in the data.",
        "select_cloze_text": "Select the text you want to practice:",
        "cloze_info": "Fill each [GAP] with one of the options. An option can only be used once.",
        "check_answers_button": "âœ”ï¸ Check Answers",
        "clear_answers_button": "ğŸ”„ Clear Answers",
        "practice_another_text_button": "ğŸ”„ Practice Another Text",
        
        # Sentence Writing Module
        "sentence_writing_title": "Sentence Writing Practice âœï¸",
        "no_sentence_words_found": "âš ï¸ No words found in 'palavras_unicas_por_tipo.txt'. Please create the file.",
        "stats_header": "ğŸ“Š Statistics",
        "total_words_metric_sentence": "Total Words",
        "completed_words_metric": "Completed (5/5)",
        "partial_words_metric": "In Progress (1-4)",
        "untouched_words_metric": "Untouched (0/5)",
        "word_selection_header": "ğŸ” Word Selection",
        "filter_by_status": "Filter by status:",
        "choose_word_sentence": "Or choose a specific word:",
        "class_level_label": "Class",
        "reference_sentence_label": "Reference",
        "your_sentences_header": "Your Sentences",
        "feedback_header": "Feedback / Comments",
        "save_button_sentence": "ğŸ’¾ Save Sentences & Comment",
        "save_success_sentence": "âœ… Saved successfully for word '{word}'!",
        "export_options_header": "ğŸ“¤ Export Options",
        "export_all_button": "Download All (TXT)",
        "export_filtered_button": "Download Filtered (TXT)",
        "feedback_placeholder": "Feedback here...",
        "no_words_in_filter": "No words for this filter",
        "filter_by_level": "Filter by Level:",
        "filter_by_class": "Filter by Class:",
        "activity_chart_header": "ğŸ“Š Daily Activity",
        "last_30_days_activity_title": "Sentences Written in the Last 30 Days",
        "no_activity_data": "No writing activity recorded yet. Start writing some sentences!",
        "delete_word_data_button": "ğŸ—‘ï¸ Delete Data",
        "delete_word_data_success": "All sentence data for '{word}' has been deleted.",
        "grade_label": "Grade (0-10)",
        "correction_label": "Correction",
        "average_grade_label": "Average Grade",
        "corrected_checkbox": "Corrected âœ…",
        "include_comments_toggle": "Include Comments",
        "filter_by_correction_label": "Filter by Correction Status:",
        "all_sentences": "All",
        "corrected_sentences": "Corrected",
        "not_corrected_sentences": "Not Corrected",
        "include_corrections_toggle": "Include Corrections",
        "include_grades_toggle": "Include Grades",

    },
    "fr": {
        # Main App & General UI
        "app_title": "Bienvenue sur votre Tableau de Bord d'Ã‰tude",
        "debug_mode_toggle": "ğŸ Activer le Mode de DÃ©bogage",
        "clear_cache_button": "ğŸ”„ Vider le Cache et Recharger",
        "cache_cleared_success": "Cache vidÃ© avec succÃ¨s ! Les donnÃ©es vont Ãªtre rechargÃ©es.",
        "progress_overview_header": "ğŸ“Š AperÃ§u des ProgrÃ¨s",
        "practice_english_button": "Start Learning ğŸ‡¨ğŸ‡¦",
        "practice_french_button": "Start Learning ğŸ‡«ğŸ‡·",
        "dashboard_title": "Tableau de bord ğŸ‡«ğŸ‡·",
        "change_language_button": "ğŸŒ Changer de Langue",
        "active_words_metric": "âš¡ Mots Actifs",
        "accuracy_metric": "ğŸ¯ PrÃ©cision Globale",
        "sessions_metric": "ğŸ—“ï¸ Sessions TerminÃ©es",
        "practice_header": "ğŸ§  Modes de Pratique",
        "reinforce_header": "ğŸ’ª Renforcer & MaÃ®triser",
        "analyze_header": "âœï¸ Analyser & CrÃ©er",
        "back_to_dashboard": "ğŸ”™ Retour au Tableau de Bord",
        "no_active_words": "âš ï¸ Aucun mot actif pour le quiz. Veuillez en activer sur la page Stats & Gestionnaire.",
        "mastery_pie_chart_title": "ğŸ† MaÃ®trise GÃ©nÃ©rale",
        "progress_distribution_title": "ğŸ“ˆ RÃ©partition des ProgrÃ¨s",
        "no_progress_data": "Aucune donnÃ©e de progression Ã  afficher.",
        "error_ranking_title": "ğŸ”¥ Classement des DifficultÃ©s (Top Erreurs)",
        "see_full_ranking_button": "ğŸ‘€ Voir le classement complet",
        "no_errors_to_rank": "âœ… Aucune erreur enregistrÃ©e pour les mots actifs. Excellent travail !",
        "age_ranking_title": "â³ Classement par AnciennetÃ©",
        "no_words_to_rank_by_age": "âœ… Aucun mot actif Ã  classer par anciennetÃ©.",
        
        # Button Names
        "anki_quiz_button": "ğŸ—ƒï¸ Quiz ANKI",
        "gpt_quiz_button": "ğŸ¤– Quiz GPT",
        "mixed_quiz_button": "ğŸ”„ Quiz Mixte",
        "cloze_quiz_button": "ğŸ“ Quiz Cloze",
        "review_mode_button": "ğŸ” Mode de RÃ©vision",
        "focus_mode_button": "ğŸ¯ Mode Focus",
        "writing_mode_button": "âœï¸ Mode d'Ã‰criture",
        "sentence_writing_button": "ğŸ–‹ï¸ Pratique de Phrases",
        "stats_button": "ğŸ“Š Stats & Gestionnaire",

        # Quiz UI (Shared)
        "how_many_questions": "Combien de questions souhaitez-vous rÃ©pondre ?",
        "start_quiz": "â–¶ï¸ DÃ©marrer le Quiz",
        "no_valid_questions": "âŒ Aucune question valide trouvÃ©e pour les filtres sÃ©lectionnÃ©s. Essayez 'AlÃ©atoire' ou un autre type.",
        "quiz_progress": "Progression : {idx}/{total} questions",
        "check_button": "âœ”ï¸ VÃ©rifier",
        "next_button": "â¡ï¸ Suivant",
        "cancel_quiz": "âœ–ï¸ Annuler le Quiz",
        "correct_answer": "âœ… Correct !",
        "incorrect_answer": "âŒ Incorrect ! La bonne rÃ©ponse est : {correct}",
        "final_result": "ğŸ‰ RÃ©sultat final : {correct_count} corrects, {error_count} erreurs | Score : {score}%",
        "finish_button": "ğŸ Terminer",
        "choose_exercise_type": "Choisissez le type d'exercice :",

        # ANKI Quiz
        "anki_quiz_title": "Quiz ANKI ğŸ‡«ğŸ‡·",
        "word_meaning_anki": "1-Signification du mot",
        "translation_anki": "2-Traduction du mot",
        "synonym_anki": "3-Synonyme",
        "gap_fill_anki": "4-Texte Ã  trous",
        "reading_anki": "5-ComprÃ©hension Ã‰crite",

        # GPT Quiz
        "gpt_quiz_title": "Quiz GPT ğŸ‡«ğŸ‡·",
        "how_many_unique_words": "Combien de MOTS UNIQUES utiliser ?",
        "allow_word_repetition": "Autoriser la rÃ©pÃ©tition de mots ?",
        "repetition_help_no": "Si 'Non', chaque mot n'apparaÃ®tra qu'une seule fois.",
        "repetition_help_yes": "Si 'Oui', le mÃªme mot peut apparaÃ®tre plusieurs fois avec des exercices diffÃ©rents.",
        "option_yes": "Oui",
        "option_no": "Non",
        "start_exercises": "â–¶ï¸ DÃ©marrer les Exercices",
        "cancel_exercises": "âœ–ï¸ Annuler les Exercices",

        # Mixed Quiz
        "mixed_quiz_info": "Ce mode combine des questions des modules Quiz ANKI et Quiz GPT.",

        # Review Mode
        "review_mode_title": "Mode de RÃ©vision ğŸ‡«ğŸ‡·",
        "review_info": "Ce mode teste vos connaissances sur des mots maÃ®trisÃ©s (inactifs). En cas d'erreur, le mot sera rÃ©activÃ© et sa progression sera rÃ©initialisÃ©e.",
        "how_many_words_to_review": "Combien de mots souhaitez-vous rÃ©viser ?",
        "start_review": "â–¶ï¸ DÃ©marrer la RÃ©vision",
        "cancel_review": "âœ–ï¸ Annuler la RÃ©vision",
        "review_complete": "ğŸ‰ RÃ©vision terminÃ©e ! Score : {score}%",
        "words_reactivated": "âš ï¸ Les mots suivants ont Ã©tÃ© rÃ©activÃ©s et leur progression rÃ©initialisÃ©e : {words}",
        "no_inactive_words_info": "Vous n'avez pas encore de mots maÃ®trisÃ©s Ã  rÃ©viser. Continuez Ã  pratiquer dans les autres modes !",
        
        # Focus Mode
        "focus_mode_info": "Choisissez un mot pour pratiquer intensivement tous ses exercices disponibles.",
        "choose_focus_word": "SÃ©lectionnez un mot pour vous concentrer :",
        "start_focus_button": "â–¶ï¸ DÃ©marrer le focus sur '{word}'",
        "choose_another_word": "ğŸ”„ Choisir un autre mot",
        "practicing_with": "Pratique avec :",
        
        # Writing Mode
        "writing_info": "Pratiquez votre Ã©criture. Choisissez un mot dans la liste pour Ã©crire ou rÃ©viser, ou tirez-en un au hasard.",
        "choose_word_label": "Choisissez un mot pour pratiquer ou rÃ©viser :",
        "random_word_button": "ğŸ² Tirer un nouveau mot",
        "text_area_label": "Ã‰crivez ou modifiez votre texte ici :",
        "words_metric": "Mots",
        "chars_metric": "CaractÃ¨res",
        "paragraphs_metric": "Paragraphes",
        "save_text_button": "ğŸ’¾ Enregistrer le texte",
        "empty_text_error": "Le champ de texte est vide.",
        "text_saved_success": "Le texte pour le mot '{word}' a Ã©tÃ© enregistrÃ© avec succÃ¨s !",
        
        # Stats Page
        "db_summary_header": "ğŸ“Š RÃ©sumÃ© de la base de donnÃ©es",
        "total_words_metric": "ğŸ“š Mots au total",
        "inactive_words_metric": "ğŸ’¤ Mots inactifs",
        "anki_source_metric": "ğŸ—ƒï¸ Source ANKI",
        "gpt_source_metric": "ğŸ¤– Source GPT",
        "import_log_header": "âš ï¸ Journal d'importation des donnÃ©es",
        "import_log_warning": "Des problÃ¨mes ont Ã©tÃ© dÃ©tectÃ©s lors de la lecture des fichiers de donnÃ©es. Les lignes/fichiers suivants ont Ã©tÃ© ignorÃ©s :",
        "vocab_manager_header": "ğŸ—‚ï¸ Gestionnaire de vocabulaire",
        "filter_by_source": "Filtrer par source :",
        "filter_by_date": "Filtrer par date d'ajout :",
        "delete_filtered_button": "ğŸ—‘ï¸ Supprimer tout ce qui est filtrÃ©",
        "show_exercise_details": "Afficher les dÃ©tails par exercice",
        "col_active": "Actif ?",
        "col_delete": "Suppr. ?",
        "col_word": "Mot",
        "col_source": "Source",
        "col_progress": "ProgrÃ¨s",
        "col_status": "Statut",
        "col_status_help": "ğŸ† indique le nombre de fois que le mot a Ã©tÃ© maÃ®trisÃ© !",
        "save_active_status_button": "ğŸ’¾ Enregistrer le statut 'Actif'",
        "delete_selected_button": "ğŸ—‘ï¸ Supprimer la sÃ©lection",
        "written_texts_log_header": "âœï¸ Journal des textes Ã©crits",
        "cloze_texts_manager_header": "ğŸ“ Gestionnaire de textes Cloze",
        "danger_zone_header": "âš ï¸ Zone de Danger",
        "danger_zone_warning": "L'action ci-dessous est irrÃ©versible et effacera TOUT votre historique de performance.",
        "clear_history_button": "ğŸ—‘ï¸ Effacer TOUT l'historique",
        "no_cloze_in_memory": "Aucun exercice de type '7-Cloze-Text' trouvÃ© en mÃ©moire.",
        "delete_cloze_button": "ğŸ—‘ï¸ Supprimer les textes Cloze sÃ©lectionnÃ©s",
        "no_cloze_selected_for_deletion": "Aucun texte Cloze n'a Ã©tÃ© marquÃ© pour suppression.",

        # Cloze Quiz
        "no_cloze_exercises_found": "Aucun exercice de type '7-Cloze-Text' trouvÃ© dans les donnÃ©es.",
        "select_cloze_text": "SÃ©lectionnez le texte que vous souhaitez pratiquer :",
        "cloze_info": "Remplissez chaque [GAP] avec une des options. Une option ne peut Ãªtre utilisÃ©e qu'une seule fois.",
        "check_answers_button": "âœ”ï¸ VÃ©rifier les rÃ©ponses",
        "clear_answers_button": "ğŸ”„ Effacer les rÃ©ponses",
        "practice_another_text_button": "ğŸ”„ Pratiquer un autre texte",

        # Sentence Writing Module
        "sentence_writing_title": "Pratique d'Ã‰criture de Phrases âœï¸",
        "no_sentence_words_found": "âš ï¸ Aucun mot trouvÃ© dans 'palavras_unicas_por_tipo.txt'. Veuillez crÃ©er le fichier.",
        "stats_header": "ğŸ“Š Statistiques",
        "total_words_metric_sentence": "Mots Totaux",
        "completed_words_metric": "TerminÃ©s (5/5)",
        "partial_words_metric": "En Cours (1-4)",
        "untouched_words_metric": "Intacts (0/5)",
        "word_selection_header": "ğŸ” SÃ©lection de Mots",
        "filter_by_status": "Filtrer par statut :",
        "choose_word_sentence": "Ou choisir un mot spÃ©cifique :",
        "class_level_label": "Classe",
        "reference_sentence_label": "RÃ©fÃ©rence",
        "your_sentences_header": "Vos Phrases",
        "feedback_header": "Commentaires / Feedback",
        "save_button_sentence": "ğŸ’¾ Enregistrer les Phrases & Commentaire",
        "save_success_sentence": "âœ… EnregistrÃ© avec succÃ¨s pour le mot '{word}' !",
        "export_options_header": "ğŸ“¤ Options d'Exportation",
        "export_all_button": "TÃ©lÃ©charger Toutes les Phrases (TXT)",
        "export_filtered_button": "TÃ©lÃ©charger FiltrÃ©s (TXT)",
        "feedback_placeholder": "Commentaires ici...",
        "no_words_in_filter": "Aucun mot pour ce filtre",
        "filter_by_level": "Filtrer par Niveau :",
        "filter_by_class": "Filtrer par Classe :",
        "activity_chart_header": "ğŸ“Š ActivitÃ© Quotidienne",
        "last_30_days_activity_title": "Phrases Ã‰crites au Cours des 30 Derniers Jours",
        "no_activity_data": "Aucune activitÃ© d'Ã©criture enregistrÃ©e pour le moment. Commencez Ã  Ã©crire des phrases !",
        "delete_word_data_button": "ğŸ—‘ï¸ Supprimer DonnÃ©es",
        "delete_word_data_success": "Toutes les donnÃ©es de phrase pour '{word}' ont Ã©tÃ© supprimÃ©es.",
        "grade_label": "Note (0-10)",
        "correction_label": "Correction",
        "average_grade_label": "Note Moyenne",
        "corrected_checkbox": "CorrigÃ© âœ…",
        "include_comments_toggle": "Inclure les Commentaires",
        "filter_by_correction_label": "Filtrer par statut de correction :",
        "all_sentences": "Toutes",
        "corrected_sentences": "CorrigÃ©es",
        "not_corrected_sentences": "Non CorrigÃ©es",
        "include_corrections_toggle": "Inclure les Corrections",
        "include_grades_toggle": "Inclure les Notes",

    }
}

def get_text(key, lang, **kwargs):
    """
    Retorna o texto traduzido para a chave e idioma fornecidos.
    Usa inglÃªs como padrÃ£o se a traduÃ§Ã£o nÃ£o for encontrada.
    Permite formataÃ§Ã£o de string com argumentos de palavra-chave.
    """
    default_lang = 'en' if lang not in ['en', 'fr'] else lang
    text_template = TRANSLATIONS.get(default_lang, TRANSLATIONS['en']).get(key, f"<{key}_NOT_FOUND>")
    
    if kwargs:
        return text_template.format(**kwargs)
    return text_template